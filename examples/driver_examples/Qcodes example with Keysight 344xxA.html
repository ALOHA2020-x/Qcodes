

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QCoDeS Example with Keysight 344xxA &mdash; QCoDeS 0.5.0+40.g21c220cea documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Qcodes example with Keysight B1500 Semiconductor Parameter Analyzer" href="Qcodes example with Keysight B1500 Parameter Analyzer.html" />
    <link rel="prev" title="QCoDeS Example with Keysight 33500B" href="Qcodes example with Keysight 33500B.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.5.0+40.g21c220cea
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">QCoDes API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/generated/qcodes.instrument_drivers.html">qcodes.instrument_drivers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#dataset">DataSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plotting">Plotting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#drivers">Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="QCodes example with Keithley S46.html">QCoDeS Example with Tektronix Keithley S46</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes example with Rigol DG1062.html">QCoDeS Example with the Rigol DG 1062 Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes example with Tektronix DPO 72004C.html">QCoDeS example with Textronix DPO 7200xx scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes example with Tektronix DPO 72004C.html#Future-work">Future work</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with AMI430.html">QCoDeS Example with AMI430</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Agilent 34400A.html">QCoDeS Example with Agilent 34400A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Alazar 9360.html">QCoDeS Example with Alazar ATS 9360</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with DynaCool PPMS.html">QCoDeS Example with DynaCool PPMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Gentec Maestro.html">QCoDeS Example with Gentec Maestro</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with HP8753D.html">QCoDeS Example with HP8753D</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Ithaco.html">QCoDeS Example with Ithaco</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keithley 2600.html">QCoDeS Example with with Keithley 2600</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight 33500B.html">QCoDeS Example with Keysight 33500B</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">QCoDeS Example with Keysight 344xxA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Parameters-and-methods-overview">Parameters and methods overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Single-value-reading">Single value reading</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Multivalue-triggered-measurements">Multivalue triggered measurements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Special-values-of-some-parameters">Special values of some parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Display-state-impacts-command-execution-speed">Display state impacts command execution speed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Error-handling">Error handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Using-data_buffer-for-triggered-multisample-measurement-(deprecated)">Using data_buffer for triggered multisample measurement (deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight B1500 Parameter Analyzer.html">Qcodes example with Keysight B1500 Semiconductor Parameter Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight B2200 Series Femto Leakage Switch Matrix.html">QCoDeS Example with Keysight B2200 Series Femto Leakage Switch Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight Infiniium Oscilloscope.html">QCoDeS Example with Keysight Infiniium Oscilloscopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight Network Analyzer.html">QCoDeS Example with Keysight Network Analyzers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Lakeshore 325.html">QCoDeS Example with Lakeshore 325</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Lakeshore 336 or 372 - Bluefors T control.html">QCoDeS Example with the Lakeshore Model 372 to Control the Temperature of the Bluefors Fridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Minicircuits Switch boxes (USB-XSPDT).html">QCoDeS Example with Minicircuits Switch Boxes Controlled via USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Newport AG-UC8.html">QCoDeS Example with Newport AG-UC8 Piezo Motion Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Oxford Mercury iPS.html">QCoDeS Example with Mercury iPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Oxford Triton.html">QCoDeS Example with Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with QDac.html">QCoDeS Example with QDac</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with QDac_channels.html">QCoDeS Example with QDac_channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rigol DP832.html">QCoDeS Example with Rigol DP832 Power Supply</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rohde Schwarz HMC8043.html">QCoDeS Example with R&amp;S HMC 8043 Power Supply</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rohde Schwarz RTO 1000 series Oscilloscope.html">QCoDeS Example with Rohde Schwarz RTO 1000 Series Oscilloscope</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rohde Schwarz ZNB.html">QCoDeS Example with Rohde Schwarz ZNB20/8</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Stahl.html">QCoDeS Example with the Stahl Bias Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Stanford SR830.html">QCoDeS Example with Stanford SR830</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Stanford SR86x with buffered readout.html">QCoDeS Example with Standford Research SR86x Lock-in Amplifier with Buffered Readout</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Tektronix AWG5014C.html">QCoDeS Example with Tektronix AWG5014</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Tektronix AWG70002A.html">QCoDeS Example with Tektronix AWG70002A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Tektronix TPS2012.html">QCoDeS Example with Tektronix TPS2012</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Yokogawa GS2xx.html">QCoDeS Example with Yokogawa GS200/GS210</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with ZI UHF-LI.html">QCoDeS Example with ZI UHF-LI</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with keithley 2450.html">QCoDeS Example with Tektronix Keithley 2450 Source Meter</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes+broadbean example with Tektronix AWG5208.html">QCoDeS+Broadbean Example with Tektronix AWG5208</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes-example-with-Signal-Hound-USB-SA124B.html">QCoDeS Example with Signal Hound USB-SA124B</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes-example-with-Signal-Hound-USB-SA124B-ParameterWithSetpoints.html">QCoDeS Example with Signal Hound USB-SA124B ParameterWithSetpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#writing-drivers">Writing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#legacy-examples">Legacy examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QCoDeS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples of using QCoDeS</a> &raquo;</li>
        
      <li>QCoDeS Example with Keysight 344xxA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/examples/driver_examples/Qcodes example with Keysight 344xxA.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="QCoDeS-Example-with-Keysight-344xxA">
<h1>QCoDeS Example with Keysight 344xxA<a class="headerlink" href="#QCoDeS-Example-with-Keysight-344xxA" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">344xxA</span></code> models of Keysight digital multimeters have similar QCoDeS drivers. In this tutorial, <code class="docutils literal notranslate"><span class="pre">Keysight_34465A</span></code> is chosen for showcasing the usage of the instrument.</p>
<p>Note however that not every feature/parameter is available on all <code class="docutils literal notranslate"><span class="pre">344xxA</span></code> models. This, when possible, is reflected in the instantiated driver object. Also note that models like <code class="docutils literal notranslate"><span class="pre">34465A</span></code> have options (like <code class="docutils literal notranslate"><span class="pre">DIG</span></code> and <code class="docutils literal notranslate"><span class="pre">MEM</span></code>) that can either be enabled or disabled on a particular instrument; this also has impact on availability of some features/parameters and/or their settings. In general, refer to the instrument’s manual for detailed information.</p>
<p><strong>NOTE</strong>: Beginning with firmware revision 3.0, the digitizing and advanced triggering option, referred to as “DIG”, for models 34465A-DIG/34470A-DIG, is now standard.</p>
<p>The driver does not cover all the features of the instrument because it is being mostly used for voltage DC measurements. Contribution is welcome.</p>
<p><strong>NOTE</strong>: use drivers for these models which originate from <code class="docutils literal notranslate"><span class="pre">*_submodules</span></code> python modules, from example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.Keysight.Keysight_34465A_submodules</span> <span class="kn">import</span> <span class="n">Keysight_34465A</span>
</pre></div>
</div>
<p>instead of</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.Keysight.Keysight_34465A</span> <span class="kn">import</span> <span class="n">Keysight_34465A</span>
</pre></div>
</div>
<p>The latter ones are deprecated due to their deficiencies.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">numpy</span>

<span class="kn">import</span> <span class="nn">qcodes</span>
<span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.Keysight.Keysight_34465A_submodules</span> <span class="k">import</span> <span class="n">Keysight_34465A</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span> <span class="o">=</span> <span class="n">Keysight_34465A</span><span class="p">(</span><span class="s1">&#39;dmm&#39;</span><span class="p">,</span> <span class="s1">&#39;USB0::10893::257::MY57504787::0::INSTR&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Connected to: Keysight Technologies 34465A (serial:MY57504787, firmware:A.02.16-02.40-02.16-00.51-03-01) in 0.46s
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="Parameters-and-methods-overview">
<h2>Parameters and methods overview<a class="headerlink" href="#Parameters-and-methods-overview" title="Permalink to this headline">¶</a></h2>
<p>Here is an overview (not exhaustive) of the parameters and methods that are available in the driver.</p>
<p>The driver is not only comprised of root-level parameters and methods but also contains submodules which logically group some functionality.</p>
<ul class="simple">
<li><p>Measurements</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.init_measurement()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.fetch()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.read()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.volt</span></code> - measure one voltage point now (note: may not always work)</p></li>
</ul>
</li>
<li><p>Range settings</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.range</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.autorange</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.autorange_once()</span></code></p></li>
</ul>
</li>
<li><p>Triggering</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.source</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.delay</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.auto_delay_enabled</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.count</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.slope</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.level</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.trigger.force()</span></code></p></li>
</ul>
</li>
<li><p>Sample settings</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.sample.count</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.sample.source</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.sample.timer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.sample.pretrigger_count</span></code></p></li>
</ul>
</li>
<li><p>Display control</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.display.text</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.display.clear()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.display.enabled</span></code></p></li>
</ul>
</li>
<li><p>Related measurement accuracy</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.NPLC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.resolution</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.line_frequency</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.aperture.mode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.aperture.time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dmm.autozero</span></code></p></li>
</ul>
</li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">dmm.parameters</span></code> (or other ways) to explore all the parameters.</p>
<p>As an extra, let’s print the readable snapshot of the instrument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">print_readable_snapshot</span><span class="p">(</span><span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dmm:
        parameter     value
--------------------------------------------------------------------------------
IDN            :        {&#39;vendor&#39;: &#39;Keysight Technologies&#39;, &#39;model&#39;: &#39;34465A&#39;, &#39;seri...
NPLC           :        10 (NPLC)
aperture_mode  :        OFF
aperture_time  :        0.1
autorange      :        ON
autozero       :        ON
line_frequency :        50 (Hz)
range          :        1000
resolution     :        0.0001 (V)
timeout        :        5 (s)
volt           :        -5.9611e-08 (V)
dmm_display:
        parameter value
--------------------------------------------------------------------------------
enabled :       True
text    :
dmm_trigger:
        parameter         value
--------------------------------------------------------------------------------
auto_delay_enabled :    True
count              :    1
delay              :    0.00016 (s)
level              :    0 (V)
slope              :    NEG
source             :    IMM
dmm_sample:
        parameter       value
--------------------------------------------------------------------------------
count            :      1
pretrigger_count :      0
source           :      IMM
timer            :      1 (s)
timer_minimum    :      0.43913 (s)
</pre></div></div>
</div>
</div>
<div class="section" id="Single-value-reading">
<h2>Single value reading<a class="headerlink" href="#Single-value-reading" title="Permalink to this headline">¶</a></h2>
<p>If one simpy wants to measure a single voltage value right now, the convenient <code class="docutils literal notranslate"><span class="pre">volt</span></code> parameter can be used.</p>
<p>Note that it may not work for some configurations of the instrument, for example, when <code class="docutils literal notranslate"><span class="pre">sample.count</span></code> is not <code class="docutils literal notranslate"><span class="pre">1</span></code>. Later in this notebook, we will present more prowerful and robust ways of performing measurements.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">volt</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>-9.30337575e-06
</pre></div>
</div>
</div>
</div>
<div class="section" id="Multivalue-triggered-measurements">
<h2>Multivalue triggered measurements<a class="headerlink" href="#Multivalue-triggered-measurements" title="Permalink to this headline">¶</a></h2>
<p><strong>NOTE</strong>: Refer to the instrument manual for more information on how to perform measurements with the instrument; here, only the most basic and frequently used ones are demonstated.</p>
<p>Measurements with the instrument are performed in the following way: the instrument’s settings are set for a particular kind of measurement, then the measurement is started/initialized, then after all the data has been acquired, it is retrieved from the instrument. Below is an example of such a measurement.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">autorange</span></code> parameters or <code class="docutils literal notranslate"><span class="pre">autorange_once</span></code> method to set the measurement range. Disabling autorange is recommended by the instrument’s manual for speeding up the measurement.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">autorange_once</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>In order to set up the accuracy of the measurements and related settings, set up <code class="docutils literal notranslate"><span class="pre">NPLC</span></code> or <code class="docutils literal notranslate"><span class="pre">aperture_*</span></code> parameters (if available).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">aperture_mode</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">aperture_time</span><span class="p">(</span><span class="mf">2e-5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Set up triggering mechanism. Note that trigger settings and methods are inside <code class="docutils literal notranslate"><span class="pre">trigger</span></code> submodule of the instrument driver. Here, we will use immediate triggering (the measurement is triggered uppon measurement initialization, that is when <code class="docutils literal notranslate"><span class="pre">init_measurement</span></code> is called) with 1 trigger without any delays. Consulm the instrument’s manual for more information on various triggering options.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="s1">&#39;IMM&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Set up sampling settings. Note that sampling parameters and method are inside <code class="docutils literal notranslate"><span class="pre">sample</span></code> submodule of the instrument driver. Here, we set to measure 15 samples.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">pretrigger_count</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We are also going to set the sample source to timer (not avaliable in all models) so that the instrument ensures that the samples are taken with fixed periods between them. The <code class="docutils literal notranslate"><span class="pre">timer</span></code> parameter allows to set the value of that fixed period. For simplicity, we are going to let the instrument deduct the minimum value of it according to the current instrument configuration (!) and set it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">source</span><span class="p">(</span><span class="s1">&#39;TIM&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s1">&#39;MIN&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It turns out that commands are executed faster when the display of the instrument is disabled or is displaying text. One of the further section expands on it. Here, we will just set the display to some text.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;Example with 15 samples&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In order to initiate the measurement, call <code class="docutils literal notranslate"><span class="pre">init_measurement</span></code> method of the driver. In the case of this example, the instrument will get into “wait-for-trigger” mode but because the trigger source is “immediate”, the instrument will immediately start measuring the 15 samples.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">init_measurement</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The insrtument is going to measure 15 samples and save them to its memory. Once the measurement is completed, we can call <code class="docutils literal notranslate"><span class="pre">fetch</span></code> method of the driver to retreive the acquired data.</p>
<p>While the measurement is going, there are two things we can do. One is to <code class="docutils literal notranslate"><span class="pre">sleep</span></code> until the end of the measurement, and then call <code class="docutils literal notranslate"><span class="pre">fetch</span></code>. The other one is to call <code class="docutils literal notranslate"><span class="pre">fetch</span></code> immediately after the measurement has been initiated - this way the instrument will return the acquired data right when the measurement is finished. This sounds pretty useful, however there are two considerations to keep in mind: the instrument manual hints that calling fetching immediately after initiation may be slower
than waiting for the measurement to complete; if the measurement takes longer than the VISA command timeout, the code may raise a VISA timeout exception while the measurement is properly running. To overcome the latter consideration, one could in principle wrap <code class="docutils literal notranslate"><span class="pre">fetch</span></code> call into the following <code class="docutils literal notranslate"><span class="pre">try-finally</span></code> block that takes care of the VISA timeout value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">old_timeout</span> <span class="o">=</span> <span class="n">dmm</span><span class="o">.</span><span class="n">visa_handle</span><span class="o">.</span><span class="n">timeout</span>  <span class="c1"># it is in milliseconds</span>
<span class="n">new_timeout</span> <span class="o">=</span> <span class="n">old_timeout</span> <span class="o">+</span> <span class="n">n_samples</span> <span class="o">*</span> <span class="n">time_per_sample</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="c1"># where, n_samples == dmm.sample.count(),</span>
<span class="c1"># and time_per_sample == dmm.sample.timer()</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">visa_handle</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">new_timeout</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">dmm</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">dmm</span><span class="o">.</span><span class="n">visa_handle</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">old_timeout</span>
</pre></div>
</div>
<p>Assuming that we’ve just slept or waited enough for the measurement to complete, let’s <code class="docutils literal notranslate"><span class="pre">fetch</span></code> the data from the instrument. Note that due to the nature of the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> command of the instrument, one can fetch the same measured data more than once (until, for example, a new measurement has been initiated; refer to the instrument’s manual for more information on this).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">dmm</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([-0.00469509, -0.00495776, -0.00509389, -0.00502464, -0.00457326,
       -0.00368487, -0.00033184,  0.00395255,  0.00707154,  0.00978691,
        0.01218942,  0.01157326,  0.01100726,  0.01077802,  0.0099947 ])
</pre></div>
</div>
</div>
<p>Note that there is also a <code class="docutils literal notranslate"><span class="pre">read</span></code> method. It’s difference from <code class="docutils literal notranslate"><span class="pre">fetch</span></code> is that it also initiates the new measurement. Using <code class="docutils literal notranslate"><span class="pre">read</span></code> might be convenient for some cases while <code class="docutils literal notranslate"><span class="pre">init_measurement</span></code> + <code class="docutils literal notranslate"><span class="pre">fetch</span></code> definitely allow for more control.</p>
<p>Since the measurement is finished, let’s bring back the display to life.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>If needed, it is straightforward to calculate a vector of times when the acquired data points were measured; for example, like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">n</span> <span class="o">=</span> <span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">()</span>
<span class="n">setpoints</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">*</span><span class="n">t</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">setpoints</span>  <span class="c1"># in seconds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([0.     , 0.00063, 0.00126, 0.00189, 0.00252, 0.00315, 0.00378,
       0.00441, 0.00504, 0.00567, 0.0063 , 0.00693, 0.00756, 0.00819,
       0.00882])
</pre></div>
</div>
</div>
</div>
<div class="section" id="Special-values-of-some-parameters">
<h2>Special values of some parameters<a class="headerlink" href="#Special-values-of-some-parameters" title="Permalink to this headline">¶</a></h2>
<p>Some parameters can be set to special values like <code class="docutils literal notranslate"><span class="pre">MIN</span></code>/<code class="docutils literal notranslate"><span class="pre">MAX</span></code>/<code class="docutils literal notranslate"><span class="pre">DEF</span></code> which usually mean minimum/maximum/default, respectively.</p>
<p>In order to obtain the actual value of the parameter that gets set when setting it to one of these special values, just call the get method of the parameter.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Find out what the maximum value of `sample_timer` can be</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s1">&#39;MAX&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>3600.0
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Find out what the default value of `sample_timer` is</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s1">&#39;DEF&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>1.0
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Find out what the recommended minumum value of `sample_timer` is</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s1">&#39;MIN&#39;</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0.000588
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Alternatively, if available, use a conveniently implemented</span>
<span class="c1"># get-only parameter to find out the actual value,</span>
<span class="c1"># for example, for MIN value of `sample_timer` there is such</span>
<span class="c1"># a convenient get-only parameter:</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">timer_minimum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0.000588
</pre></div>
</div>
</div>
</div>
<div class="section" id="Display-state-impacts-command-execution-speed">
<h2>Display state impacts command execution speed<a class="headerlink" href="#Display-state-impacts-command-execution-speed" title="Permalink to this headline">¶</a></h2>
<p>Although it is indeed just nice to be able to display useful text on the screen of the instrument, it turn out that disabling the display (or making it display does text instead of all the indicators and values) improves command execution speed from the remote interface and provides basic security (quoted from the instrument’s manual).</p>
<p>Hence, the driver provides <code class="docutils literal notranslate"><span class="pre">display</span></code> submodule with <code class="docutils literal notranslate"><span class="pre">text</span></code> parameter that displays a given text on the insrturment, and a <code class="docutils literal notranslate"><span class="pre">clear</span></code> method that clears the text from display.</p>
<p>The driver’s <code class="docutils literal notranslate"><span class="pre">display</span></code> submodule also provides <code class="docutils literal notranslate"><span class="pre">enabled</span></code> parameter. When it is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the state of the display is such that it does not show anything. Note, however, that displaying text is still possible when the <code class="docutils literal notranslate"><span class="pre">display.enabled</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> (when <code class="docutils literal notranslate"><span class="pre">display.enabled</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">display.clear</span></code> clears the text from the screen but does not enable it).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Displays the text</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Returns display to its normal state</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Note that a call to `display_clear` also updates</span>
<span class="c1"># the value of the `display_text` parameter:</span>
<span class="k">assert</span> <span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Display can also be cleared by setting</span>
<span class="c1"># `display_text` to an empty string</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;some text&#39;</span><span class="p">)</span>  <span class="c1"># Displays some text</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Returns display to its normal state</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Disables the display, which makes it turn black</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Shows some text on a disabled display</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;i&#39;m disabled but still showing text&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Enabling display in this state</span>
<span class="c1"># won&#39;t change what&#39;s being displayed</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># ... but since the display is now enabled,</span>
<span class="c1"># clearing the display will not only remove the text</span>
<span class="c1"># but also show all the normal display indicators.</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Error-handling">
<h2>Error handling<a class="headerlink" href="#Error-handling" title="Permalink to this headline">¶</a></h2>
<p>Use the following methods to read the error queue of the instrument. The instrument has an error queue of length up to 20 messages. The queue message retrieval is first-in-first-out.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Retrieve the first (i.e. oldest) error message</span>
<span class="c1"># in the queue (and thereby remove from the queue)</span>
<span class="n">dmm</span><span class="o">.</span><span class="n">error</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(0, &#39;No error&#39;)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The entire queue can be flushed out</span>
<span class="c1"># using `flush_error_queue` method.</span>
<span class="c1"># Printing the messages in enabled by default</span>
<span class="c1"># and can be disables with the `verbose` kwarg.</span>

<span class="c1"># generate a few errors</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">dmm</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;produce an error!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm</span><span class="o">.</span><span class="n">flush_error_queue</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-113 Undefined header
-113 Undefined header
-113 Undefined header
0 No error
</pre></div></div>
</div>
</div>
<div class="section" id="Using-data_buffer-for-triggered-multisample-measurement-(deprecated)">
<h2>Using data_buffer for triggered multisample measurement (deprecated)<a class="headerlink" href="#Using-data_buffer-for-triggered-multisample-measurement-(deprecated)" title="Permalink to this headline">¶</a></h2>
<p><strong>NOTE</strong>: This approach is deprecated and only available in the deprecated Keysight 344xxA drivers (those which do not originate from <code class="docutils literal notranslate"><span class="pre">*_submodules.py</span></code> files).</p>
<p>One may use <code class="docutils literal notranslate"><span class="pre">data_buffer</span></code> <code class="docutils literal notranslate"><span class="pre">ArrayParameter</span></code> in order to perform a triggered measurement of a predefined number of samples with a single trigger that has not delay. The following code shows how to do it.</p>
<p><strong>NOTE</strong>: The reason this approach is deprecated is that the internal implementation of <code class="docutils literal notranslate"><span class="pre">data_buffer</span></code> is quite specific and sets up the instrument into a mode that is not generally useful. This is why it is recommended that the users use driver methods like <code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">fetch</span></code> in order to implement the measurements. It is also up to user to decide to wrap his code into his own measurement function/routine or even a QCoDeS parameter for his own convenience.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.Keysight.Keysight_34465A</span> <span class="k">import</span> <span class="n">Keysight_34465A</span> <span class="k">as</span> <span class="n">Keysight_34465A_old</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm_old</span> <span class="o">=</span> <span class="n">Keysight_34465A_old</span><span class="p">(</span><span class="s1">&#39;dmm_old&#39;</span><span class="p">,</span> <span class="s1">&#39;USB0::10893::257::MY57504787::0::INSTR&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
c:\users\a-miasta\pycharmprojects\qcodes\qcodes\instrument_drivers\Keysight\private\Keysight_344xxA.py:143: UserWarning: This driver is old and will be removed from QCoDeS soon. Please use the Keysight_344xxA classes from the files instrument_drivers/Keysight/Keysight_344xxA_submodules instead.
  UserWarning)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Connected to: Keysight Technologies 34465A (serial:MY57504787, firmware:A.02.16-02.40-02.16-00.51-03-01) in 0.51s
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dmm_old</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Set the sample timer for now to default,</span>
<span class="c1"># because due to aperture mode usage above</span>
<span class="c1"># there might be configuration compatibility</span>
<span class="c1"># errors on the instrument. They are not harmful,</span>
<span class="c1"># we do this just for the sake of a clean demo.</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">sample_timer</span><span class="p">(</span><span class="s1">&#39;DEF&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Set the trigger mode. For the sake of this example,</span>
<span class="c1"># we are going to use &quot;immediate&quot; which will start measuring</span>
<span class="c1"># right after `init_measurement` is called (it will be called</span>
<span class="c1"># for you by `data_buffer`&#39;s get method&#39;)</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">trigger_source</span><span class="p">(</span><span class="s1">&#39;IMM&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Set sample count to number of samples that</span>
<span class="c1"># should be acquired</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">sample_count</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># One needs to prepare the `data_buffer` parameter</span>
<span class="c1"># and the instrument for this measurement, otherwise</span>
<span class="c1"># getting `data_buffer` will raise an exception</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\a-miasta\AppData\Local\Continuum\anaconda3\envs\qcodes\lib\site-packages\ipykernel_launcher.py:4: DeprecationWarning: The function &#34;prepare&#34; is deprecated, because the use of this ArrayParameter is limiting as it represents only a single way of performing measurements and performs preparations that are not generally applicable Use &#34;driver methods like `fetch` and `read` (together with other methods and parameters) and custom functions and parameters implemented on top of them&#34; as an alternative.
  after removing the cwd from sys.path.
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Finally perform the measurement,</span>
<span class="c1"># and obtain the measured data</span>
<span class="c1"># (note the text on the instrument&#39;s display</span>
<span class="c1"># during the measurement)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dmm_old</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Now, here&#39;s the measured data</span>
<span class="n">data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([-1.22270673e-05,  2.16857420e-05,  1.70717544e-05,  8.30517780e-06,
        1.91480488e-05])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Here are the values of setpoints,</span>
<span class="c1"># in this case its time in seconds when</span>
<span class="c1"># each of the points have been measured relative</span>
<span class="c1"># to the first point</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">setpoints</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>((0.0,
  0.5056200000000001,
  1.0112400000000001,
  1.5168600000000003,
  2.0224800000000003),)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The shape of the setpoints reflects</span>
<span class="c1"># the number of samples</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>(5,)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># For internal use, the amount of time used for</span>
<span class="c1"># measuring every point is saved into the following</span>
<span class="c1"># attribute:</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">time_per_point</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0.404496
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># ... which is equal to the value of the</span>
<span class="c1"># `sample_timer` parameter:</span>
<span class="n">dmm_old</span><span class="o">.</span><span class="n">sample_timer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0.404496
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Qcodes example with Keysight B1500 Parameter Analyzer.html" class="btn btn-neutral float-right" title="Qcodes example with Keysight B1500 Semiconductor Parameter Analyzer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Qcodes example with Keysight 33500B.html" class="btn btn-neutral float-left" title="QCoDeS Example with Keysight 33500B" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>