

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Logging &mdash; QCoDeS 0.6.0+376.gf3c9985f5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Combined Parameters" href="../legacy/Combined Parameters.html" />
    <link rel="prev" title="Logfile parsing" href="logfile_parsing.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.6.0+376.gf3c9985f5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">QCoDes API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/generated/qcodes.instrument_drivers.html">qcodes.instrument_drivers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#dataset">DataSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#drivers">Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#writing-drivers">Writing Drivers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#logging">Logging</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="logfile_parsing.html">Logfile parsing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#TL;DR">TL;DR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Contents">Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Instrument-communication-loggers">Instrument communication loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Set-up-logging-in-QCoDeS">Set up logging in QCoDeS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Temporarily-elevating-the-logging-level">Temporarily elevating the logging level</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Filtering-log-messages-by-instrument">Filtering log messages by instrument</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Capturing-Pandas.DataFrame">Capturing Pandas.DataFrame</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#legacy-examples">Legacy examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QCoDeS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples of using QCoDeS</a> &raquo;</li>
        
      <li>Logging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/examples/logging/logging_example.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Logging">
<h1>Logging<a class="headerlink" href="#Logging" title="Permalink to this headline">¶</a></h1>
<p>(back to the overview <a class="reference internal" href="../Main.html"><span class="doc">offline</span></a>,<a class="reference external" href="https://nbviewer.jupyter.org/github/QCoDeS/Qcodes/tree/master/docs/examples/Main.ipynb">online</a>)</p>
<p><a class="reference external" href="https://nbviewer.jupyter.org/github/QCoDeS/Qcodes/tree/master/docs/examples/logging/logging_example.ipynb">read on nbviewer</a></p>
<div class="section" id="TL;DR">
<h2>TL;DR<a class="headerlink" href="#TL;DR" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There is a QCoDeS logging module: <code class="docutils literal notranslate"><span class="pre">qcodes.utils.logger</span></code></p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">logger.start_all_logging</span></code> at the start of every script/session to make sure all log messages get stored to the <code class="docutils literal notranslate"><span class="pre">.qcodes/logs</span></code> folder in your home directory.</p></li>
<li><p>For debugging purposes you can log messages of an individual instrument (and see the VISA dialog).</p></li>
<li><p>You can obtain all logging messages in a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> for further analysis.</p></li>
</ul>
</div>
<div class="section" id="Contents">
<h2>Contents<a class="headerlink" href="#Contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#Introduction">Introduction</a></p></li>
<li><p><a class="reference external" href="#Set-up-logging-in-QCoDeS">Set up logging in QCoDeS</a></p>
<ul>
<li><p><a class="reference external" href="#QCoDeS-default-handlers">QCoDeS default handlers</a></p></li>
<li><p><a class="reference external" href="#IPython-command-history">IPython command history</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#Temporarily-elevating-the-logging-level">Temporarily elevating the logging level</a></p></li>
<li><p><a class="reference external" href="#Filtering-log-messages-by-instrument">Filtering log messages by instrument</a></p></li>
<li><p><a class="reference external" href="#Capturing-Pandas.DataFrame">Capturing Pandas.DataFrame</a></p></li>
</ul>
</div>
<div class="section" id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h2>
<p>Python offers an excellent logging framework that is widely used in QCoDeS. As a user you might be interested in reading the log messages that are generated by QCoDeS for debugging and also profiling purposes.</p>
<p>All log records(=messages+meta data) are created using a python <code class="docutils literal notranslate"><span class="pre">logging.logger</span></code> object. In QCoDeS there is a logger for every module with the same name as the module itself, i.e. you can use <code class="docutils literal notranslate"><span class="pre">logging.getLogger('qcodes.instrument.base')</span></code> for getting the logger of the QCoDeS <code class="docutils literal notranslate"><span class="pre">Instrument</span></code>. From the dots in the names of the loggers a hierarchy is define, at the top of which is the so called <em>root logger</em> that catches all messages. The log records created in a logger are processed by the
<em>handlers</em> that have been attached to this specific <em>logger</em>. The handlers can for example be used to output the log messages into different locations, like the console or a log file.</p>
<p>Every logger, handler and log record has an associated level. The default levels are: <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code> <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>. The levels determine how messages are passed: A logger passes only records that exceeds its minimal passing level to its handlers and the handlers in turn only output those messages that exceed their minimal passing level.</p>
<p>For a more detailed description of Python logging refer to the <a class="reference external" href="https://docs.python.org/3.6/library/logging.html#module-logging">official manual</a> (This is all well summed up <a class="reference external" href="https://docs.python.org/3.6/howto/logging.html#logging-flow">in this chart</a>)</p>
</div>
<div class="section" id="Instrument-communication-loggers">
<h2>Instrument communication loggers<a class="headerlink" href="#Instrument-communication-loggers" title="Permalink to this headline">¶</a></h2>
<p>Not all the used loggers in QCoDeS follow the previously presented rule of naming the logger after the module. For instruments there are the following loggers: - <strong>qcodes.instrument.base.com</strong>: This logger logs all the communication of the <code class="docutils literal notranslate"><span class="pre">Instrument</span></code> and its descendants with the actual physical instruments e.g. the messages generated by the <code class="docutils literal notranslate"><span class="pre">write</span></code> and <code class="docutils literal notranslate"><span class="pre">query</span></code> calls. - <strong>qcodes.instrument.base.com.visa</strong>: This is a sublogger that logs all the communication related messages of the
<code class="docutils literal notranslate"><span class="pre">VisaInstrument</span></code> and its descendants.</p>
</div>
<div class="section" id="Set-up-logging-in-QCoDeS">
<h2>Set up logging in QCoDeS<a class="headerlink" href="#Set-up-logging-in-QCoDeS" title="Permalink to this headline">¶</a></h2>
<p>At the beginning of every experiment script file you should include the following lines:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qcodes.logger</span> <span class="k">import</span> <span class="n">start_all_logging</span>
<span class="n">start_all_logging</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Logging hadn&#39;t been started.
Activating auto-logging. Current session state plus future input saved.
Filename       : /home/vsts/.qcodes/logs/command_history.log
Mode           : append
Output logging : True
Raw input log  : False
Timestamping   : True
State          : active
</pre></div></div>
</div>
<p>The call to <code class="docutils literal notranslate"><span class="pre">start_all_logging</span></code> does two things: 1. Create handlers to output logging messages from the root logger to the console and to a log file. 2. Enable logging of the ipython commands into a separate log file.</p>
<div class="section" id="QCoDeS-default-handlers">
<h3>QCoDeS default handlers<a class="headerlink" href="#QCoDeS-default-handlers" title="Permalink to this headline">¶</a></h3>
<p>The effect of the console handler can be seen in the two printed lines with a red background below the previous code cell. Every line corresponds to a log record. The fields of the records are separated by <code class="docutils literal notranslate"><span class="pre">¦</span></code> and have the following meaning: 0. time stamp 1. logger name, here the module name 2. record log level 3. name of the function that created the log message 4. line at which the message has been issued 5. actual log message</p>
<p>The same format is used for the file handler. By default QCoDeS logs to the file <code class="docutils literal notranslate"><span class="pre">&lt;user</span> <span class="pre">directory&gt;/.qcodes/logs/qcodes.log</span></code>. To avoid endlessly long files, the files roll over at midnight and get the date appended to their name where <code class="docutils literal notranslate"><span class="pre">qcodes.log</span></code> without date always gives you the log messages of the same day.</p>
<p>To configure the levels you want to log/handle, you need to edit the <code class="docutils literal notranslate"><span class="pre">qcodesrc.json</span></code> file in you home directory. The default values are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;logger&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;console_level&quot;</span><span class="p">:</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span>
    <span class="s2">&quot;file_level&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
    <span class="s2">&quot;logger_levels&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;pyvisa&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>While <code class="docutils literal notranslate"><span class="pre">console_level</span></code> and <code class="docutils literal notranslate"><span class="pre">file_level</span></code> describe the levels of the two default handlers described previously, <code class="docutils literal notranslate"><span class="pre">logger_levels</span></code> is a dictionary that can be used to limit the messages passed on by module level loggers. This means with these defaults, the pyvisa module will not log messages on a <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> level. Therefore setting the <code class="docutils literal notranslate"><span class="pre">console_level</span></code> to <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> will not show the pyvisa debug messages (you certainly don’t want to see them as they log every single character that is passed to
an instrument with an individual message). On the other hand setting the console level to warning will still suppress pyvisa info messages.</p>
</div>
<div class="section" id="IPython-command-history">
<h3>IPython command history<a class="headerlink" href="#IPython-command-history" title="Permalink to this headline">¶</a></h3>
<p>The output above that follows these logging messages comes from IPython. It tells us that all issued IPython commands will be logged to a file. The file lives in the same log directory as the python logs and is called <code class="docutils literal notranslate"><span class="pre">command_history.log</span></code>. It will not roll over.</p>
<p>To change the command history logging directory you will need to call <code class="docutils literal notranslate"><span class="pre">start_command_history_logger</span></code> with the new path as an argument.</p>
</div>
</div>
<div class="section" id="Temporarily-elevating-the-logging-level">
<h2>Temporarily elevating the logging level<a class="headerlink" href="#Temporarily-elevating-the-logging-level" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you might wish to catch e.g. all debug messages for a few lines of code. You can do this simply by:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">qcodes.logger</span> <span class="k">as</span> <span class="nn">logger</span>
<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;example_logger&#39;</span><span class="p">)</span>

<span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;This message will not be visible as the logging level is set to `DEBUG`&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">console_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;This message is visible as the logging level is temporarily elevated to `DEBUG`&#39;</span><span class="p">)</span>

<span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;The level is back to what it used to be&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2019-10-08 16:36:59,067 ¦ example_logger ¦ DEBUG ¦ &lt;ipython-input-2-c7e8205cb86b&gt; ¦ &lt;module&gt; ¦ 8 ¦ This message is visible as the logging level is temporarily elevated to `DEBUG`
</pre></div></div>
</div>
<p>For other handlers than the console handler you can do the same thing using the <code class="docutils literal notranslate"><span class="pre">handler_level</span></code> context manager.</p>
</div>
<div class="section" id="Filtering-log-messages-by-instrument">
<h2>Filtering log messages by instrument<a class="headerlink" href="#Filtering-log-messages-by-instrument" title="Permalink to this headline">¶</a></h2>
<p>A very common use case for logging in qcodes is to analyze the communication with a VISA instrument. For this purpose the logger module provides a context manager to filter the logging messages by instrument.</p>
<p>Generally one could of course simply attach a handler to the logger of <code class="docutils literal notranslate"><span class="pre">qcodes.instrument_drivers.Vendor.Type</span></code> but this would not show the messages that are generated by the visa communication in <code class="docutils literal notranslate"><span class="pre">qcodes.instrument.visa</span></code>. Additionally with the approach implemented here one can not only filter messages for a given type of instrument but also of a specific instance.</p>
<p>To demonstrate this consider the following mock up of the AMI430 Magnet controller that consists of individual visa instruments for each axis, here with the names <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qcodes.instrument.ip_to_visa</span> <span class="k">import</span> <span class="n">AMI430_VISA</span>
<span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.american_magnetics.AMI430</span> <span class="k">import</span> <span class="n">AMI430_3D</span><span class="p">,</span> <span class="n">AMI430Warning</span>

<span class="kn">import</span> <span class="nn">qcodes.instrument.sims</span> <span class="k">as</span> <span class="nn">sims</span>

<span class="n">visalib</span> <span class="o">=</span> <span class="n">sims</span><span class="o">.</span><span class="vm">__file__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;__init__.py&#39;</span><span class="p">,</span> <span class="s1">&#39;AMI430.yaml@sim&#39;</span><span class="p">)</span>

<span class="n">mag_x</span> <span class="o">=</span> <span class="n">AMI430_VISA</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;GPIB::1::INSTR&#39;</span><span class="p">,</span> <span class="n">visalib</span><span class="o">=</span><span class="n">visalib</span><span class="p">,</span>
                        <span class="n">terminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mag_y</span> <span class="o">=</span> <span class="n">AMI430_VISA</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;GPIB::2::INSTR&#39;</span><span class="p">,</span> <span class="n">visalib</span><span class="o">=</span><span class="n">visalib</span><span class="p">,</span>
                        <span class="n">terminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mag_z</span> <span class="o">=</span> <span class="n">AMI430_VISA</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;GPIB::3::INSTR&#39;</span><span class="p">,</span> <span class="n">visalib</span><span class="o">=</span><span class="n">visalib</span><span class="p">,</span>
                        <span class="n">terminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">field_limit</span> <span class="o">=</span> <span class="p">[</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">2</span>
<span class="p">]</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">AMI430_3D</span><span class="p">(</span><span class="s2">&quot;AMI430-3D&quot;</span><span class="p">,</span> <span class="n">mag_x</span><span class="p">,</span> <span class="n">mag_y</span><span class="p">,</span> <span class="n">mag_z</span><span class="p">,</span> <span class="n">field_limit</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Connected to: QCoDeS AMI430_simulation (serial:1337, firmware:0.0.01) in 0.07s
Connected to: QCoDeS AMI430_simulation (serial:1337, firmware:0.0.01) in 0.00s
Connected to: QCoDeS AMI430_simulation (serial:1337, firmware:0.0.01) in 0.00s
</pre></div></div>
</div>
<p>In the above messages you can see the prefix <code class="docutils literal notranslate"><span class="pre">[&lt;instrument_name&gt;(&lt;instrument_type&gt;)]</span></code>. To analyze the visa communication one can use <code class="docutils literal notranslate"><span class="pre">filter_instrument</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">console_level</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">filter_instrument</span><span class="p">(</span><span class="n">mag_x</span><span class="p">):</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2019-10-08 16:36:59,185 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: STATE?
2019-10-08 16:36:59,186 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 2
2019-10-08 16:36:59,190 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,190 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 0.0
2019-10-08 16:36:59,191 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,192 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 0.0
</pre></div></div>
</div>
<p>The output on the console shows as expected only messages from the <code class="docutils literal notranslate"><span class="pre">x</span></code> instrument. For multiple instruments pass a sequence of instruments to <code class="docutils literal notranslate"><span class="pre">filter_instrument</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">console_level</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">filter_instrument</span><span class="p">((</span><span class="n">mag_x</span><span class="p">,</span> <span class="n">mag_y</span><span class="p">)):</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2019-10-08 16:36:59,212 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: STATE?
2019-10-08 16:36:59,213 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 2
2019-10-08 16:36:59,213 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [y(AMI430_VISA)] Querying: STATE?
2019-10-08 16:36:59,214 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [y(AMI430_VISA)] Response: 2
2019-10-08 16:36:59,215 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,216 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 0.0
2019-10-08 16:36:59,216 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [y(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,217 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [y(AMI430_VISA)] Response: 0.0
2019-10-08 16:36:59,218 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [x(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,219 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [x(AMI430_VISA)] Response: 0.0
2019-10-08 16:36:59,220 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 225 ¦ [y(AMI430_VISA)] Querying: FIELD:MAG?
2019-10-08 16:36:59,220 ¦ qcodes.instrument.base.com.visa ¦ DEBUG ¦ visa ¦ ask_raw ¦ 227 ¦ [y(AMI430_VISA)] Response: 0.0
</pre></div></div>
</div>
</div>
<div class="section" id="Capturing-Pandas.DataFrame">
<h2>Capturing Pandas.DataFrame<a class="headerlink" href="#Capturing-Pandas.DataFrame" title="Permalink to this headline">¶</a></h2>
<p>To process the logs, especially with the timestamps the <a class="reference external" href="https://pandas.pydata.org/">pandas module</a> is highly suited. With <code class="docutils literal notranslate"><span class="pre">logger.log_to_dataframe</span></code> or <code class="docutils literal notranslate"><span class="pre">logger.logfile_to_dataframe</span></code> you can convert a log(file) to a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. See this (<a class="reference external" href="https://nbviewer.jupyter.org/github/QCoDeS/Qcodes/tree/master/docs/examples/logging/logfile_parsing.ipynb">online</a>, <a class="reference internal" href="logfile_parsing.html"><span class="doc">offline</span></a>) notebook for an example.</p>
<p>You can also use a context manager to capture the logs directly into a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qcodes.logger.log_analysis</span> <span class="k">import</span> <span class="n">capture_dataframe</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">console_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARN</span><span class="p">):</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">capture_dataframe</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">get_dataframe</span><span class="p">):</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">get_dataframe</span><span class="p">()</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="n">get_dataframe</span><span class="p">()</span> <span class="c1"># this is the cummulative log</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>asctime</th>
      <th>name</th>
      <th>levelname</th>
      <th>module</th>
      <th>funcName</th>
      <th>lineno</th>
      <th>message</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>2019-10-08 16:36:59,519</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>_adjust_child_instruments</td>
      <td>704</td>
      <td>[AMI430-3D(AMI430_3D)] Checking whether fields...</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[y(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[y(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>5</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>6</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>7</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>_adjust_child_instruments</td>
      <td>720</td>
      <td>[AMI430-3D(AMI430_3D)] Field values OK, procee...</td>
    </tr>
    <tr>
      <td>8</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>9</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>10</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[y(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>11</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[y(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>12</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>13</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>14</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>15</td>
      <td>2019-10-08 16:36:59,521</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>16</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[y(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>17</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[y(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>18</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>19</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>20</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: COIL?</td>
    </tr>
    <tr>
      <td>21</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2.0</td>
    </tr>
    <tr>
      <td>22</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: CURR:LIMIT?</td>
    </tr>
    <tr>
      <td>23</td>
      <td>2019-10-08 16:36:59,522</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 80</td>
    </tr>
    <tr>
      <td>24</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: QU?</td>
    </tr>
    <tr>
      <td>25</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 0</td>
    </tr>
    <tr>
      <td>26</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: PERS?</td>
    </tr>
    <tr>
      <td>27</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 0</td>
    </tr>
    <tr>
      <td>28</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>29</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>30</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>write_raw</td>
      <td>210</td>
      <td>[z(AMI430_VISA)] Writing: PAUSE</td>
    </tr>
    <tr>
      <td>31</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>write_raw</td>
      <td>210</td>
      <td>[z(AMI430_VISA)] Writing: CONF:FIELD:TARG 1.0</td>
    </tr>
    <tr>
      <td>32</td>
      <td>2019-10-08 16:36:59,523</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: PS:INST?</td>
    </tr>
    <tr>
      <td>33</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: ERROR</td>
    </tr>
    <tr>
      <td>34</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: PS:INST?</td>
    </tr>
    <tr>
      <td>35</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: ERROR</td>
    </tr>
    <tr>
      <td>36</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: PS?</td>
    </tr>
    <tr>
      <td>37</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 0</td>
    </tr>
    <tr>
      <td>38</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>write_raw</td>
      <td>210</td>
      <td>[z(AMI430_VISA)] Writing: RAMP</td>
    </tr>
    <tr>
      <td>39</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>set_field</td>
      <td>339</td>
      <td>[z(AMI430_VISA)] Starting blocking ramp of z t...</td>
    </tr>
    <tr>
      <td>40</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>41</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>42</td>
      <td>2019-10-08 16:36:59,524</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>43</td>
      <td>2019-10-08 16:36:59,525</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>44</td>
      <td>2019-10-08 16:36:59,525</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>set_field</td>
      <td>344</td>
      <td>[z(AMI430_VISA)] Finished blocking ramp</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df2</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>asctime</th>
      <th>name</th>
      <th>levelname</th>
      <th>module</th>
      <th>funcName</th>
      <th>lineno</th>
      <th>message</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>2019-10-08 16:36:59,519</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>_adjust_child_instruments</td>
      <td>704</td>
      <td>[AMI430-3D(AMI430_3D)] Checking whether fields...</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[y(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2019-10-08 16:36:59,520</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[y(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>85</td>
      <td>2019-10-08 16:36:59,532</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>86</td>
      <td>2019-10-08 16:36:59,532</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>87</td>
      <td>2019-10-08 16:36:59,532</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[z(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>88</td>
      <td>2019-10-08 16:36:59,532</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[z(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>89</td>
      <td>2019-10-08 16:36:59,532</td>
      <td>qcodes.instrument.base</td>
      <td>DEBUG</td>
      <td>AMI430</td>
      <td>set_field</td>
      <td>344</td>
      <td>[z(AMI430_VISA)] Finished blocking ramp</td>
    </tr>
  </tbody>
</table>
<p>90 rows × 7 columns</p>
</div></div>
</div>
<p>You can of course combine the context managers like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">console_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARN</span><span class="p">):</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">capture_dataframe</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">get_dataframe</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">logger</span><span class="o">.</span><span class="n">filter_instrument</span><span class="p">(</span><span class="n">mag_x</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">):</span>
            <span class="n">driver</span><span class="o">.</span><span class="n">cartesian</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">get_dataframe</span><span class="p">()</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>asctime</th>
      <th>name</th>
      <th>levelname</th>
      <th>module</th>
      <th>funcName</th>
      <th>lineno</th>
      <th>message</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>2019-10-08 16:36:59,597</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: STATE?</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2019-10-08 16:36:59,597</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 2</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2019-10-08 16:36:59,597</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2019-10-08 16:36:59,597</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 0.0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2019-10-08 16:36:59,598</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>225</td>
      <td>[x(AMI430_VISA)] Querying: FIELD:MAG?</td>
    </tr>
    <tr>
      <td>5</td>
      <td>2019-10-08 16:36:59,598</td>
      <td>qcodes.instrument.base.com.visa</td>
      <td>DEBUG</td>
      <td>visa</td>
      <td>ask_raw</td>
      <td>227</td>
      <td>[x(AMI430_VISA)] Response: 0.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>For an analysis of the timestamps please also refer to the log analysis example notebook (<a class="reference external" href="https://nbviewer.jupyter.org/github/QCoDeS/Qcodes/tree/master/docs/examples/logging/logfile_parsing.ipynb">online</a>, <a class="reference internal" href="logfile_parsing.html"><span class="doc">offline</span></a>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../legacy/Combined Parameters.html" class="btn btn-neutral float-right" title="Combined Parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="logfile_parsing.html" class="btn btn-neutral float-left" title="Logfile parsing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>